[gd_scene load_steps=15 format=3 uid="uid://btp0dvhkjxep"]

[ext_resource type="Script" uid="uid://d0c1dr5w4epx4" path="res://scripts/GameManager.cs" id="1_0f027"]
[ext_resource type="SphereMesh" uid="uid://cx43tljd06fex" path="res://test_sphere_mesh.tres" id="1_2c62f"]
[ext_resource type="Script" uid="uid://751yj3svkc4v" path="res://scripts/rotator.gd" id="1_gyfs4"]
[ext_resource type="Script" uid="uid://dk8q0aajeogni" path="res://scripts/Utils/DrawDebugManager.cs" id="4_8mm7a"]
[ext_resource type="Script" uid="uid://daf82iewejgfu" path="res://scripts/fpsCounter.gd" id="4_d5x1h"]
[ext_resource type="PackedScene" uid="uid://cbfq7hji05gf8" path="res://prefabs/Buildings/BasicTower.tscn" id="4_hq1ik"]
[ext_resource type="Script" uid="uid://cw638jn5oj5ce" path="res://scripts/InputManager.cs" id="6_nfk4m"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_o3jxj"]
vertex_color_use_as_albedo = true
albedo_color = Color(0.1481536, 0.08014498, 0.060781255, 1)

[sub_resource type="PlaneMesh" id="PlaneMesh_0f027"]
material = SubResource("StandardMaterial3D_o3jxj")
size = Vector2(50, 50)

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_66tet"]

[sub_resource type="WorldBoundaryShape3D" id="WorldBoundaryShape3D_7ycvg"]
margin = 0.1

[sub_resource type="BoxMesh" id="BoxMesh_o3jxj"]

[sub_resource type="MultiMesh" id="MultiMesh_0f027"]
transform_format = 1
mesh = ExtResource("1_2c62f")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_8mm7a"]
shading_mode = 0
vertex_color_use_as_albedo = true
albedo_color = Color(0, 1, 0, 1)

[node name="MainScene" type="Node3D"]

[node name="Scenery" type="Node3D" parent="."]

[node name="Floor" type="MeshInstance3D" parent="Scenery"]
mesh = SubResource("PlaneMesh_0f027")
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="Scenery/Floor"]
physics_material_override = SubResource("PhysicsMaterial_66tet")

[node name="InfinitePlane" type="CollisionShape3D" parent="Scenery/Floor/StaticBody3D"]
shape = SubResource("WorldBoundaryShape3D_7ycvg")

[node name="Camera3D" type="Camera3D" parent="Scenery"]
transform = Transform3D(-4.371139e-08, -0.6779417, 0.7351157, 0, 0.7351157, 0.67794174, -1, 2.9633773e-08, -3.213293e-08, 31.680582, 19.875137, 4.3009018e-06)

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="Scenery"]
transform = Transform3D(-0.45723367, -0.69265246, 0.55782586, -0.06774481, 0.6525349, 0.75472456, -0.8867629, 0.30729553, -0.34528482, 0, 19.137554, 0)
light_energy = 1.5
shadow_enabled = true
directional_shadow_mode = 1
directional_shadow_max_distance = 500.0

[node name="ReferenceCube" type="MeshInstance3D" parent="Scenery"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.9349983, 0)
mesh = SubResource("BoxMesh_o3jxj")
script = ExtResource("1_gyfs4")

[node name="MultiMeshInstance3D" type="MultiMeshInstance3D" parent="Scenery"]
multimesh = SubResource("MultiMesh_0f027")

[node name="Managers" type="Node" parent="."]

[node name="GameManager" type="Node" parent="Managers" node_paths=PackedStringArray("multiMesh")]
script = ExtResource("1_0f027")
multiMesh = NodePath("../../Scenery/MultiMeshInstance3D")
BuildingsDataPath = "res://ConfigFiles/BuildingsData.json"
turretModel = ExtResource("4_hq1ik")

[node name="QuadTreeDebugManager" type="Node" parent="Managers"]
script = ExtResource("4_8mm7a")
debugMaterial = SubResource("StandardMaterial3D_8mm7a")

[node name="InputManager" type="Node3D" parent="Managers" node_paths=PackedStringArray("camera", "gameManager")]
script = ExtResource("6_nfk4m")
camera = NodePath("../../Scenery/Camera3D")
gameManager = NodePath("../GameManager")

[node name="GameUI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="fpsDisplay" type="RichTextLabel" parent="GameUI"]
layout_mode = 0
offset_right = 40.0
offset_bottom = 40.0
text = "FPS: XXX"
fit_content = true
scroll_active = false
autowrap_mode = 0
script = ExtResource("4_d5x1h")
